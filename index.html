<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Import Website</title>
	<style>
		body {
			background-color: #1c1c1c;
			color: white;
			font-family: Arial, sans-serif;
		}
		h1 {
			font-size: 2em;
			margin-top: 0;
		}
		.loading {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.8);
			z-index: 9999;
			text-align: center;
			padding-top: 20%;
			box-sizing: border-box;
		}
		.loading img {
			height: 50px;
			width: 50px;
		}
		table {
			border-collapse: collapse;
			width: 100%;
			background-color: rgba(255, 255, 255, 0.5);
			margin-bottom: 10px;
		}
		table tr:first-child {
			font-weight: bold;
			background-color: black;
		}
		table td, table th {
			padding: 5px;
			border: 1px solid #ddd;
		}
		table td:last-child {
			background-color: black;
		}
	</style>
</head>
<body>
	<div class="loading">
		<img src="https://i.imgur.com/qkKy8jK.gif" alt="Loading...">
	</div>
	<h1>Import Website</h1>
	<form>
		<label for="link">Enter the link:</label>
		<input type="text" id="link" name="link" value="">
		<button type="submit">Import</button>
	</form>
	<div id="content"></div>
	<script>
		const urlParams = new URLSearchParams(window.location.search);
		const link = urlParams.get('link');

		if (link) {
			document.querySelector('#link').value = link;
			importWebsite();
		}

		function importWebsite() {
			const link = document.querySelector('#link').value.trim();
			if (!link) {
				alert('Please enter a valid link!');
				return;
			}
			showLoading();
			fetch(`https://cors-anywhere.herokuapp.com/${link}`)
				.then(response => response.text())
				.then(html => {
					hideLoading();
					const contentDiv = document.querySelector('#content');
					contentDiv.innerHTML = html;
					const tables = contentDiv.querySelectorAll('table');
					tables.forEach((table, index) => {
						table.style.opacity = 0.5;
						if (index === tables.length - 1) {
							table.style.backgroundColor = 'black';
						}
					});
					document.querySelectorAll('body, table, th, td')
						.forEach(el => el.style.color = 'white');
				})
				.catch(error => {
					hideLoading();
					console.error(error);
					alert('Failed to import website. Please try again later.');
				});
		}

		function showLoading() {
			document.querySelector('.loading').style.display = 'block';
		}

		function hideLoading() {
			document.querySelector('.loading').style.display = 'none';
		}

		document.querySelector('form').addEventListener('submit', event => {
			event.preventDefault();
			importWebsite();
		});
	</script>
</body>
</html>
